<style>
.glyphicon.spinning 
{
    animation: spin 1s infinite linear;
  -webkit-animation: spin2 1s infinite linear;
}

@keyframes spin 
{
    from { transform: scale(1) rotate(0deg);}
    to { transform: scale(1) rotate(360deg);}
}

@-webkit-keyframes spin2 
{
    from { -webkit-transform: rotate(0deg);}
    to { -webkit-transform: rotate(360deg);}
}
</style>


RoboBrain contains knowledge from different sources stored as a 
<a href="http://arxiv.org/abs/1412.0691"><strong>graph</strong> </a>. 
With our 
<a href="https://github.com/RoboBrainCode/RoboBrainWiki#robobrain-client-api"><strong>API</strong></a>
, one can push and retrieve this knowledge.  With our query language 
<a href="https://github.com/RoboBrainCode/RoboBrainWiki/blob/master/RaQueL.md#welcome-to-raquel"><strong>RaQueL</strong></a>
, one can enable several robotics applications.

<div class="container">
  <div class="row">
    

	<div class="col-md-12">
      <div class="panel panel-default">
        <div class="panel-heading">
          <span class="pull-right clickableParent "><i class="glyphicon glyphicon-chevron-up"></i></span>
          <h3 class="panel-title">Play with RaQueL online</h3>
          
        </div>
        <div class="panel-body collapseParent">
         	<div class="jumbotron">
			<div class="container-fluid">
  

      <label style="float:left ">Try out:</label>
      <select class="form-control" id="sel2">
        <option>Fetch</option>
        <option>Sort</option>
        <option>Map</option>
        <option>Filter</option>
      </select>
    <button type="button" class="btn btn-link" onclick="myFunction()" style="font-size:14px; font-weight:bold; outline:0">Insert the example</button>

  <textarea class="form-control" style="width: 110%; border:none; color:#000000; font-family: Courier; resize:none" rows="5" id="demo" ng-model="query.query" ></textarea>
  <div class="form-inline">
  <div class="form-group">   
  <button type="submit" class="btn btn-link" onclick="cleararea()" style="font-size:14px; font-weight:bold; outline:0; float:left">Clear</button></div>
  <div class="form-group">        
        <button type="submit" class="btn btn-link" ng-click="sendQuery(query)" id="searchid" style="font-size:14px; font-weight:bold; outline:0; float:right">Execute</button>    
    </div>
  </div>
     <div >
      
           <div id="regeStr" style="overflow-y:scroll;text-wrap:unrestricted;text-align:left;" class="col-md-12"> 

 </div>
</div>
</div>

  </div>

<script type="text/javascript">
function myFunction() {
    var x=document.getElementById("sel2").value;
    var y=x.split(" ")
    if(y[0]=="Fetch"){
    document.getElementById("demo").value=">>>fetch(\"({handle:'wall'})-[:`HAS_MATERIAL`]->(b)\")";
  }
    else if(y[0]=="Sort"){
    document.getElementById("demo").value=">>>paths = fetch(\"(\{handle:'standing_human'})-[e*1..3]->({handle:'phone'})\")\n>>>SortBy(\paths,'Belief')";
  }
    else if(y[0]=="Map"){
    document.getElementById("demo").value=">>>global affordances\n>>>objects =fetch(\"({handle:'sitting_human'})-[:`CAN_USE`]->(V)\")\n>>>affordances=lambda n:fetch(\"({handle :'\" + n + \"'})-[:`HAS_AFFORDANCE`]->(v)\")\n>>>iter = imap( lambda u: affordances(u) ,objects[1])\n>>>print iter.next()\n>>>print iter.next()";
  }
    else if(y[0]=="Filter"){
    document.getElementById("demo").value=">>>global entities, media\n>>>entities = lambda n: fetch(\"(v)-[:`HAS_MEDIA`]->(\{handle :'\" + n + \"'})\")\n>>>media = lambda n:fetch(\"({handle :'\" + n + \"'})-[:`HAS_MEDIA`]->(v)\")\n>>>ind_media = lambda a: ifilter(lambda u: len(entities(u)[1])==1,(media(a))[1])\n>>>iter= ind_media('tv')\n>>>print iter.next()";
  }
}

function cleararea()
{
  document.getElementById("demo").value=">>>";
  document.getElementById("regeStr").innerHTML="";
}
$(document).keypress(function(e) {
  if(e.which == 13) {
      var content=">>>";
      var txt = $("textarea#demo");
      txt.val( txt.val() + "\n>>>");
      e.preventDefault();
      count = $("#demo").val().length;
  }
});
</script>

 <style type="text/css">
p.fetch,p.sort,p.len,p.map,p.filter{
  margin: 0px;
  padding: 5px;
  background: #eee;
  border: solid 1px #fff;
}
 
</style>
</div>
</div>
</div>
  
<br>
<br>
<h3>Robotic Applications</h3>
     <div class="col-md-12">
      <div class="panel panel-default">
        <div class="panel-heading">
          <span class="pull-right clickableParent"><i class="glyphicon glyphicon-chevron-up"></i></span>
          <h3 class="panel-title">PlanIt</h3>
          
        </div>
        <div class="panel-body collapseParent" ng-controller="PlanItCtrl"><h4>
           <a href="http://planit.cs.cornell.edu/" target="_blank" ><b>A Crowdsourcing Approach for Learning to Plan Paths from Large</b></a></h4>
PlanIt uses RoboBrain to fetch trajectory parameters from different attributes computed from user preferences. You can try the example below.
<img src="images/application/planit_robobrain.png" style="width:98%" class="application_image"> 
<br>
<br>

          <div class="input-group">
            <span class="input-group-addon" id="basic-addon1">Activity Name</span>

<select class="form-control" ng-model='activity_name'>
  <option>dancing</option>
  <option>watching</option>
  <option>interacting</option>
  <option>reaching</option>
  <option>relaxing</option>
  <option>sitting</option>
  <option>watching</option>
  <option>working</option>
</select>


            <!-- <input type="text" class="form-control"  placeholder="Activity Name" aria-describedby="basic-addon1"> -->
          </div>
          <br>
            <button class="btn btn-lg btn-default" ng-click='getHeatMap()' >
              <span class="glyphicon glyphicon-refresh " id='wheel' ></span> Generate Heat Map    
          </button>
	  <!-- <button class="btn btn-default pull-right" ng-click="init()">
		<span class="glyphicon glyphicon-star"></span> Show Trajectory 
	  </button> -->	
  	  <span id="warnDisp"></span>
     
          <div id="heatMapResult">
          <!-- <img src='images/planit/heatmap_activity_dancing.png'/> -->
          </div>


  
<!-- <span ng-click='loadMore()' class='pull-right' style="color:blue;cursor:pointer" id='loadmore'>Show More .....</span> -->
<div class="row" id="seemore" style='display:block'>
                <div class="col-md-3">
                    <h3>Select files</h3>
                    Choose Multiple Files
                    <input type="file" nv-file-select="" uploader="uploader" multiple  /><br/>
                    <!-- Choose Single File
                    <input type="file" nv-file-select="" uploader="uploader" /> -->
                </div>
                <div class="col-md-1">
                </div>
                <div class="col-md-8" style="margin-bottom: 40px">

                    <h3>Upload queue(Max items:2)</h3>
                    <p>Queue length: {{ uploader.queue.length }}</p>

                    <table class="table">
                        <thead>
                            <tr>
                                <th width="50%">Name</th>
                                <th ng-show="uploader.isHTML5">Size</th>
                                <th ng-show="uploader.isHTML5">Progress</th>
                                <th>Status</th>
                                <!-- <th>Actions</th> -->
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="item in uploader.queue">
                                <td><strong>{{ item.file.name }}</strong></td>
                                <td ng-show="uploader.isHTML5" nowrap>{{ item.file.size/1024/1024|number:2 }} MB</td>
                                <td ng-show="uploader.isHTML5">
                                    <div class="progress" style="margin-bottom: 0;">
                                        <div class="progress-bar" role="progressbar" ng-style="{ 'width': item.progress + '%' }"></div>
                                    </div>
                                </td>
                                <td class="text-center">
                                    <span ng-show="item.isSuccess"><i class="glyphicon glyphicon-ok"></i></span>
                                    <span ng-show="item.isCancel"><i class="glyphicon glyphicon-ban-circle"></i></span>
                                    <span ng-show="item.isError"><i class="glyphicon glyphicon-remove"></i></span>
                                </td>
                             <!--    <td nowrap>
                                    <button type="button" class="btn btn-success btn-xs" ng-click="item.upload()" ng-disabled="item.isReady || item.isUploading || item.isSuccess">
                                        <span class="glyphicon glyphicon-upload"></span> Upload
                                    </button>
                                    <button type="button" class="btn btn-warning btn-xs" ng-click="item.cancel()" ng-disabled="!item.isUploading">
                                        <span class="glyphicon glyphicon-ban-circle"></span> Cancel
                                    </button>
                                    <button type="button" class="btn btn-danger btn-xs" ng-click="item.remove()">
                                        <span class="glyphicon glyphicon-trash"></span> Remove
                                    </button>
                                </td> -->
                            </tr>
                        </tbody>
                    </table>

                    <div>
                        <div>
                            Queue progress:
                            <div class="progress" style="">
                                <div class="progress-bar" role="progressbar" ng-style="{ 'width': uploader.progress + '%' }"></div>
                            </div>
                        </div>
                        <button type="button" class="btn btn-success btn-s" ng-click="uploader.uploadAll()" ng-disabled="!uploader.getNotUploadedItems().length">
                            <span class="glyphicon glyphicon-upload"></span> Upload all
                        </button>
                        <button type="button" class="btn btn-warning btn-s" ng-click="uploader.cancelAll()" ng-disabled="!uploader.isUploading">
                            <span class="glyphicon glyphicon-ban-circle"></span> Cancel all
                        </button>
                        <button type="button" class="btn btn-danger btn-s" ng-click="uploader.clearQueue()" ng-disabled="!uploader.queue.length">
                            <span class="glyphicon glyphicon-trash"></span> Remove all
                        </button>
                    </div>

                </div>


      <button class="btn btn-lg btn-default" ng-click='getTrajectory()' >
              <span class="glyphicon glyphicon-refresh " id='wheel1' ></span> Generate Trajectory    
      </button>
      <br> <br>
      <span style="font-size:1.3em">Output</span>
      <br>
       <div id="trajResult"></div>
       <br>
      <span style="font-size:1.3em">Console Messages</span>
      <div class="col-md-12" id="consolemsg">
      </div>

   <br><br>
   <div class="col-md-12">
                      <div class="panel panel-primary">
                          <div class="panel-heading">
                            <span class="pull-right clickableChild panel-collapsed"><i class="glyphicon glyphicon-chevron-down"></i></span>
                            <h3 class="panel-title">RaQueL query</h3>
                          </div>
                          <div class="panel-body collapse collapseChild">
                           <code>trajectories = fetch("({handle:'egg_carton'})-[e:`IS_TRAJECTORY_OF`]-()")</code>
                                    
                          </div>
                      </div>
          </div>
          <br><br>
          







</div>









       


       

        </div>
      </div>
    </div>

     <div class="col-md-12">
      <div class="panel panel-default">
        <div class="panel-heading">
          <span class="pull-right clickableParent panel-collapsed"><i class="glyphicon glyphicon-chevron-down"></i></span>
          <h3 class="panel-title">Anticipation</h3>
          
        </div>
        <div class="panel-body collapseParent panel-collapse collapse">
             <h4><a href="http://pr.cs.cornell.edu/anticipation/" target="_blank" style="color:blue;text-decoration:underline;">Anticipating Human Activities for Reactive Robotic Responses</a></h4><br>
The assistive robots working with humans should be able to understand human activities and also anticipate the future actions that the human can perform. In order to anticipate, the robot should reason over the action possibilities in the environment, i.e., object affordances, and how the actions can be performed, i.e., trajectories.
<br><br><div class="col-md-12">
            <div class="panel panel-primary">
              <div class="panel-heading">
                <span class="pull-right clickableChild panel-collapsed"><i class="glyphicon glyphicon-chevron-down"></i></span>
                <h3 class="panel-title">RaQueL query</h3>
              </div>
              <div class="panel-body collapse collapseChild">
               
              <code >trajectories = fetch("({handle:'standing_human'})-[e]-({handle:'refrigerator'})")<br>
                     anticipated_trajectory = SortBy(trajectories, 'Belief')
               </code>
                        
              </div>
            </div>
          </div>
          <br><br>
          <img src="images/application/anticipation_robobrain.png" class="application_image" style="width:100%"> 


        </div>
      </div>
    </div>

 <div class="col-md-12">
      <div class="panel panel-default">
        <div class="panel-heading">
          <span class="pull-right clickableParent panel-collapsed"><i class="glyphicon glyphicon-chevron-down"></i></span>
          <h3 class="panel-title">Tell Me Dave</h3>
          
        </div>
        <div class="panel-body collapseParent panel-collapse " ng-controller="PlanItCtrl">
  

          <div class="col-md-12">
            <div class="panel panel-primary">
              <div class="panel-heading">
                <span class="pull-right clickableChild panel-collapsed"><i class="glyphicon glyphicon-chevron-down"></i></span>
                <h3 class="panel-title">Live demos</h3>
              </div>
              <div class="panel-body collapseChild">
             

            <div class="contaier">   
              <!-- <iframe src="http://tellmedave.com/livedemos" height="500" width="600"> -->
                <p>Your browser does not support iframes.</p>
              </iframe>-->
            </div >            
              </div>
            </div>
          </div>

          <span ng-click='loadedMore()' class='pull-right' style="color:blue;cursor:pointer" id='loadedmore'>Show More .....</span>
          <div class="row" id="seenmore" style='display:none'>
            <a href="http://tellmedave.com" target="_blank" style="color:blue;text-decoration:underline;">
             <h4> Learning to map text to actions</a></h4>
            <p>Natural language is a popular choice for non-expert users to communicate to robots, computers etc. An important sub-task in this area is the problem of 
            mapping imperative sentences (<i>get me water and clean the table?</i>) to actions in the physical world. One way to do this, which has gained popularity in the past decade is the use of compositional grammar with few rules and putting the main
            burden of semantic parsing on lexicon. A lexicon of a language is a set of lexical item which maps parts of text to representation space. Tell Me Dave project
            uses VEIL representation as its choice of lexicon which are stored in the RoboBrain. Plans are underway to store other type of lexicon e.g., CCG lexicon in the RoboBrain
            and use them in a joint setting. <br><br>
          
          <div class="col-md-12">
            <div class="panel panel-primary">
              <div class="panel-heading">
                <span class="pull-right clickableChild panel-collapsed"><i class="glyphicon glyphicon-chevron-down"></i></span>
                <h3 class="panel-title">RaQueL query</h3>
              </div>
              <div class="panel-body collapseChild collapse">
               
              <code >trajectories = fetch("({handle:'egg_carton'})-[e:`IS_TRAJECTORY_OF`]-()")<br>
                     grounded_trajectory = SortBy(trajectories, 'Belief')
               </code>
                        
              </div>
            </div>
          </div>
          <br><br>The flowchar of using knowledge from RoboBrain is shown below:</p><img src="images/application/tellmedave_robobrain.png" class="application_image"  style="width:100%; height:180px;"> 


          
          
          </div>

        </div>
      </div>
    </div>



     <div class="col-md-12">
      <div class="panel panel-default">
        <div class="panel-heading">
          <span class="pull-right clickableParent panel-collapsed"><i class="glyphicon glyphicon-chevron-down"></i></span>
          <h3 class="panel-title">Partner Projects</h3>
          
        </div>         <div class="panel-body collapseParent collapsepanel-collapse collapse">
<div class="row">     <div class="col-md-5" style="margin-right:10%;">
<img src="images/application/brain4cars.jpg" style="height:125px; width:110%;border:5px;" >         <h4><a href="http://brain4cars.com/"
target="_blank"><b>Brain4Cars</b></a></h4>         Intelligent car cabin
sensing     </div>     <div class="col-md-5">         <img
src="images/application/robobarista.png" style="height:125px;">         <h4><a
href="http://robobarista.cs.cornell.edu/"
target="_blank"><b>RoboBarista</b></a></h4>         Manipulating novel objects
using learning based on transfer of object parts     </div> </div>



        </div>
      </div>
    </div>





    
  </div>
</div>





<style>
.contaier {
    width: 580px;
    height: auto;
    overflow-x: scroll;
    -webkit-overflow-scrolling: touch;
}
. span {
    margin-top: -20px;
    font-size: 15px;
}
.row {
    margin-top: 40px;
    padding: 0 10px;
}
.clickableChild {
    cursor: pointer;
} 
.clickableParent {
    cursor: pointer;
}    
</style>

<script type="text/javascript">


    jQuery(function ($) {
        $('span.clickableChild').on("click", function (e) {
            if ($(this).hasClass('panel-collapsed')) {
                // expand the panel
                $(this).parents('.panel').find('.collapseChild').slideDown();
                $(this).removeClass('panel-collapsed');
                $(this).find('i').removeClass('glyphicon-chevron-down').addClass('glyphicon-chevron-up');
            }
            else {
                // collapse the panel
                $(this).parents('.panel').find('.collapseChild').slideUp();
                $(this).addClass('panel-collapsed');
                $(this).find('i').removeClass('glyphicon-chevron-up').addClass('glyphicon-chevron-down');
            }
        });
    });
</script>



<script type="text/javascript">

    jQuery(function ($) {
        $('span.clickableParent').on("click", function (e) {
            if ($(this).hasClass('panel-collapsed')) {
                // expand the panel
                $(this).parents('.panel').find('.collapseParent').slideDown();
                $(this).removeClass('panel-collapsed');
                $(this).find('i').removeClass('glyphicon-chevron-down').addClass('glyphicon-chevron-up');
            }
            else {
                // collapse the panel
                $(this).parents('.panel').find('.collapseParent').slideUp();
                $(this).addClass('panel-collapsed');
                $(this).find('i').removeClass('glyphicon-chevron-up').addClass('glyphicon-chevron-down');
            }
        });
    });
</script>
