<div class="row">

<h2>RoboBrain API Documentation</h2>
<div class="row">
    <p>This document is the full specification of the RoboBrain API. It includes
     both <a href="wiki/robobrain-client-api">Client API</a> and the<a href="wiki/robobrain-query-api">Query API</a>.
     <a href="wiki/robobrain-client-api">RoboBrain Client API</a> is developed for pushing information and knowledge
     into the RoboBrain and <a href="wiki/robobrain-query-api">Query API</a> is developed
     for issuing queries to the RoboBrain.</p>
     
     <p>For the technical report explaining the technical and algorithmic aspects of the RoboBrain, please refer to: 
     arXiv Link <a href="http://arxiv.org/abs/1412.0691">RoboBrain: Large-Scale Knowledge Engine for Robots</a></p>
</div>

<div class="row">
<h3>RoboBrain Client API</h3> 
        <p>RoboBrain supplies a REST API to its collaborators. 
        Through RoboBrain REST API, collaborators can send their multi-modal information to the brain.</p>

        <p>RoboBrain Client API is a client developed purely in Python 2.X in order to provides unified and easy 
        way to push information to the brain.</p>

        <ul>
            <li>It has multiple processing modes and provide both batch upload and serial upload. Batch upload
                is implemented in parallel.</li>
            <li>It relies on authentication module of the robobrain.me through HTTP Auth.</li>
        </ul>

        	<h4>Installation</h4>
        	<p>In order to use the RoboBrain Client API, you need to install a few Python packages.
        	Our client requires <code>boto</code> for s3 access, <code>request</code> for sending
        	HTTP requests to the REST API and <code>filechunkio</code> for efficient file upload.
        	They can be installed by using pip as</p>

        	<blockquote>
	            <code>sudo pip install boto<br/>
    	            sudo pip install requests<br/>
        			sudo pip install filechunkio
        		</code>
        	</blockquote>

        	<p>After the required packages are installed, cloning the github repo from <a href="https://github.com/RoboBrainCode/Client">Client API - Github</a> would suffice. For installation problems and requesting an access to the private
        	repo, please send an e-mail to the <a href="mailto:robobrain@cs.stanford.edu">robobrain@cs.stanford.edu</a>.
			</p>
		
        	<h4>Client API Credentials</h4>
        	<p>In order to access to the RoboBrain Client API, you need a RoboBrain account.
		    For the user account, please use the <a href="http://robobrain.me/#/login">Login link</a>.
		    After creating the account, you need to send an e-mail to the <a href="mailto:robobrain@cs.stanford.edu">
		    robobrain@cs.stanford.edu</a> explaining your contributor account request. After you request is approved,
		    you will receive an e-mail from us. After that, you can start to use the Client API with your credentials.</p>

        <h4>Information Structure for RoboBrain Interface</h4>

        <p>RoboBrain accepts information in terms of a json structure from its collaborators. Specifically, we use the following structure:</p>
        
		<blockquote>
		   <code>
		        {<br>
		    "feedtype": "Type Of The Feed",<br>
		    "text": "Text Caption of the Feed with HashTags",<br>
		    "source_text": "Your Project Name",<br>
		    "source_url": "Your Project URL",<br>
		    "mediashow": [<br>
		      "Is 0th image for visualization or for the brain graph ?",<br>
		      "Is 1st image for visualization or for the brain graph ?",<br>
		      "True or False",<br>
		      "True means, it is for visualization"<br>
		    ],<br>
		    "media": [<br>
		      "/your/local/path/to/media0",<br>
		      "/your/local/path/to/media1",<br>
		      "/your/local/path/to/media2"<br>
		    ],<br>
		    "mediatype": [<br>
		      "Image",<br>
		      "Video",<br>
		      "Text"<br>
		    ],<br>
		    "keywords": [<br>
		      "Some",<br>
		      "Keywords",<br>
		      "About",<br>
		      "Feed"<br>
		    ],<br>
		    "mediamap": [<br>
		      "#1", (this means 0th media is related to 1st hashtag)<br>
		      "#0#1", (this means 1st media is related to 0th and 1st hashtags)<br>
		      "#0" (this means 3rd media is related to 0th hashtag)<br>
		    ],<br>
		    "graphStructure": [<br>
		      "has_appearance: #1 ->#0"<br>
		      "Edge type and related nodes"<br>
		      "It means there exist has_apparance edge from hashtag1 to hashtag0"<br>
		    ],<br>
			}
			</code>
		</blockquote>

<p>Here, we go over the each field in the format:</p>

    <blockquote>"feedtype": "Type Of The Feed",</blockquote>
    
<p>Feedtype is visualized in the bottom left corner of the feed in robobrain.me. It should include a
   few words and describe the broad category of the feed like Affordance, Grasping, Language etc.</p>

    <blockquote>"text": "Text Caption of the Feed with HashTags",</blockquote>
    
<p>Text is the caption of your feed. It should represent the information you are giving in a single English
sentence. The keywords in the text which corresponds to abstract or physical entities which are useful to robots
should be written as hashtags. Hashtag is written as #keyword. If the hashtag has more than one word, it should be
written as #hashtag_with_more_than_one_words. An example is; "The position of a #Standing_human while using a #shoe
is distributed as #$heatmap_12."</p>

<p>If you want to hashtag a media use #$ instead of #. For example, "#cup has an apperance in #image" is refering to
 the media not the concept "image"; hence, it should be replaced as "#cup has an apperance in #$image"</p>

    <blockquote>"source_text": "Your Project Name",
    "source_url": "Your Project URL",</blockquote>
    
<p>Source text is the name of the project which produces the feed and source url is a link to it. It is both used for
visualization and verification if necessary.</p>

    <blockquote>
    "mediashow": [
      "Is 0th image for visualization or for the brain graph ?",
      "Is 1st image for visualization or for the brain graph ?",
      "True or False",
      "True means, it is for visualization"
    ],</blockquote>
    
<p>Each feed includes some media files as well. These files can be images, videos, parameters, point clouds etc.
 RoboBrain requires large amount of data so we suggest pushing as many media as possible. However, visualizing that
 many media is not preferred on robobrain.me web page. So, we requests the feed provider to choose a few media to be
 displayed on the robobrain.me and mark them as "True" in the "mediashow". The number of members of the "mediashow"
 should be equal to the number of media file you push. Indeed, order represent the matching between files and these attributes.</p>

    <blockquote>"mediatype": [
      "Image",
      "Video",
      "Text"
    ],</blockquote>
    
<p>Every entry of the mediatype array represents the type of the corresponding media. Medias can be image, video or
 text if they have True as mediashow. If their mediashow is False, they can be any file.</p>

    <blockquote>"keywords": [
      "Some",
      "Keywords",
      "About",
      "Feed"
    ],</blockquote>
    
<p>Please write a few keywords representing your feed. These keywords will be used for disambiguation, entity linking 
etc. by our machine learning algorithms.</p>

<blockquote>
    "mediamap": [
      "#1", (this means 0th media is related to 1st hashtag)
      "#0#1", (this means 1st media is related to 0th and 1st hashtags)
      "#0" (this means 3rd media is related to 0th hashtag)
    ],</blockquote>
    
<p>Mediamap links each media with one or more hashtags. Hashtags are counted starting from 0 in their order of occurrence
in the text. If they occur more than once, each occurrence is a different hashtag and each occurrence is counted. If you
have multiple facts about the same object push them separately.</p>

    <blockquote>"graphStructure": [
      "has_appearance: #1 ->#0"
      "Edge type and related nodes"
      "It means there exist has_apparance edge from hashtag1 to hashtag0"
    ],</blockquote>
    
<p>We also ask contributes to supply the graph structure in terms of predicate, subject and object.
For example; has_appearance: #1 ->#0 is correspond to a predicate has_appearance, subject hashtag 1 and object hastag 0.
For the list of predicates please use the following command</p>

    <blockquote><code>python roboBrain.py getEdgeList</code></blockquote>
    
<p>It will display the currently supported set of edges/predicates. Try to use the available edges/predicates.
However, if you need a different edge/predicate type, you can simply include it in your feed. We will automatically 
add it to the list. However, to make the machine learning algorithm slightly simpler, try to be consistent with the 
previously used edges.</p>

<p>Here, we also include an example feed:</p>

<blockquote>
"feedtype": "Object Affordance",<br/>
    "text": "The position of a #Standing_human while using a #shoe is distributed as #$heatmap_12.",<br/>
    "source_text": "Hallucinating Humans",<br/>
    "source_url": "http://pr.cs.cornell.edu/hallucinatinghumans/",<br/>
    "mediashow": [<br/>
      "True",<br/>
      "True"<br/>
    ],<br/>
    "media": [<br/>
      "/home/ubuntu/images/shoe_.jpg",<br/>
      "/home/ubuntu/shoe_12_1.jpg_cr.jpg"<br/>
    ],<br/>
    "mediatype": [<br/>
      "Image",<br/>
      "image",<br/>
    ],<br/>
    "keywords": [<br/>
      "Human",<br/>
      "Affordance",<br/>
      "Object",<br/>
      "shoe",<br/>
      "Standing"<br/>
    ],<br/>
    "mediamap": [<br/>
      "#1",<br/>
      "#0#1#2"<br/>
    ],<br/>
    "graphStructure": [<br/>
      "spatially_distributed_as: #1 ->#2",<br/>
      "spatially_distributed_as: #0 ->#2",<br/>
      "can_use: #0 ->#1"<br/>
    ],<br/>
}
</blockquote>
<p>In all fields, only use alphanumeric characters, dash ‘-’, and an underscore ’_’ .</p>

</div>

<div class="row">
	<h4>Using the RoboBrain Client API (In Your Own Code)</h4>

	<p>For using the RoboBrain Client, we suggest new users to start with <code>generateFeeds.py</code> file.
	 It includes the minimal code to use the Client API. Here, we explain the <code>generateFeeds.py</code> file line by line:</p>

	    <blockquote><code>from RoboBrainClient.RoboBrainAPI import RoboBrainAPI</code></blockquote>
	    
	<p>With this line, we include the Client API</p>

	    <blockquote>RoboAPIUserName = 'YOUR_USER_NAME'<br>
	    RoboAPIPass = 'YOUR_PASSWORD'<br>
	    S3KEY = 'S3_KEY'<br>
	    S3SECRET = 'S3_SECRET'</blockquote>
	    
	<p>Please use the credentials you created for robobrain.me as your <code>RoboAPIUserName</code> and <code>RoboAPIPass</code>.
	You will receive the <code>S3KEY</code> and <code>S3SECRET</code> information in the e-mail confirming your contributor account.<br/></p>

	    <blockquote><code>rC = RoboBrainAPI(RoboAPIUserName ,RoboAPIPass,S3KEY,S3SECRET,userHandle)</code></blockquote>
	    
	<p>Here, we initialize the RobobrainAPI. Please note that at this point no connection with RoboBrain is made.</p>

	  <blockquote><code>for result in YourResults:</code><br/>
	        <code>rC.addFeed(data)</code><br/>
	   </blockquote>
	        
	<p>Here, you add feeds to the RoboBrain class by crawling through your own experimental results. Please read the
	formatting instructions in <a href="wiki/Information%20Structure%20for%20RoboBrain%20Interface">Information Structure</a> before implementing your code. Please also note that, there is
	still no request is made to the RoboBrain and all information are stored in the memory. If you are pushing large 
	amount of information, this approach can cause a problem. Hence, if you are pushing a large amount of information, 
	please call the <code>rC.push2Brain()</code> function before you reach the memory limit of your system.</p>

	    <blockquote>URL = "http://robobrain.me:3000/api/feeds/"<br>
	    rC.push2Brain(URL)<br>
	    </blockquote>
	    
	<p>At this stage, we push all the aggregated information to the RoboBrain. This function will return an HTTP response.
	 If the data push is successful, you will recieve <code>HTTP 201:OK</code> response. If you receive any other response, please make sure

	<ul>
	<li>You have no formatting error according to the specifications in <a href="wiki/information-structure-for-robobrain-interface">Information Structure</a></li>
	<li>You have working internet connection and you can reach <a href="http://robobrain.me:3000/api/feeds/">http://robobrain.me:3000/api/feeds/</a> from your browser.</li>
	<li>You can login to robobrain.me successfully with your credentials.</li>
	</ul>

	If your answer is Yes to all aforementioned questions and still not receiving <code>HTTP 201:OK</code> response, please send an e-mail to
	<a href="mailto:robobrain@cs.stanford.edu">robobrain@cs.stanford.edu</a>
</div>



<div class="row">
	<h4>Using the RoboBrain Client API (As a Script)</h4>

	<p>You can also use RoboBrain Client API as a script to upload all feeds in the current folder. 
	You can use either <code>batchUpload.py</code> or <code>batchUploadforBigDataset.py</code>. Depending on the size of the information you are pushing.
	If the amount of information you are pushing (excluding media files) is small enough to fit in the memory, use the <code>batchUpload.py</code>
	since it is faster. However, if your data is too big (e.g. at the scale of WordNet, ImageNet, Freebase, RoboBrain etc.), use the
	<code>batchUploadforBigDataset.py</code>. It is slower but more reliable.</p>

	<p>Before using the script, please change the following lines:</p>

	    <blockquote>
	    RoboAPIUserName = 'YOUR_USER_NAME'<br/>
	    RoboAPIPass = 'YOUR_PASSWORD'<br/>
	    S3KEY = 'S3_KEY'<br/>
	    S3SECRET = 'S3_SECRET'<br/>
	    </blockquote>
	    
	<p>Use the credentials you created for robobrain.me as your <code>RoboAPIUserName</code> and <code>RoboAPIPass</code>. You will
	receive the <code>S3KEY</code> and <code>S3SECRET</code> information in the e-mail confirming your contributor account.</p>

	<p>After editing the credentials, you can aggregate all feeds in the folder of the API. Each file should have an extension .json
	and it should correspond to a single feed. After collecting all the feeds in the same folder, you can use</p>

	<blockquote><code>python batchUpload.py</code></blockquote>

	or

	<blockquote><code>python batchUploadforBigDataset.py</code></blockquote>

	<p>At this stage, we push all the aggregated information to the RoboBrain. This script will return an HTTP response. 
	If the data push is successful, you will recieve <code>HTTP 201:OK</code> response. If you receive any other response,
	please make sure</p>

	<ul>
	<li>You have no formatting error according to the specifications in <a href="wiki/Information%20Structure%20for%20RoboBrain%20Interface">Information Structure</a></li>
	<li>You have working internet connection and you can reach <a href="http://robobrain.me:3000/api/feeds/">http://robobrain.me:3000/api/feeds/</a> from your browser.</li>
	<li>You can login to robobrain.me successfully with your credentials.</li>
	</ul>

	<p>If your answer is Yes to all aforementioned questions and still not receiving <code>HTTP 201:OK</code> response, please send 
	an e-mail to <a href="mailto:robobrain@cs.stanford.edu">robobrain@cs.stanford.edu</a></p>
</div>

<div class="row">
	<h2>RoboBrain Query API</h2>
	<p>RoboBrain introduces <b>RaQueL</b> (RoboBrain Query library) for querying the RoboBrain Engine. RaQueL is a combination
	of powerful functional programming concept with <a href="http://neo4j.com/docs/stable/cypher-query-lang.html">CyPher graph query language </a>
	allowing us to build applications using RoboBrain.</p>

	<p>We are still constructing documentation page for RaQueL. Please visit this page in few weeks.</p>
	</div>
</div>